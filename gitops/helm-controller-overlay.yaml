apiVersion: v1
kind: Secret
metadata:
  name: helm-controller-proxy-overlay
  namespace: tanzu-fluxcd-packageinstalls
stringData:
  add-proxy.yaml: |
    #@ load("@ytt:overlay", "overlay")
    #@overlay/match by=overlay.subset({"kind": "Deployment", "metadata": {"name": "helm-controller"}})
    ---
    spec:
      template:
        spec:
          #@overlay/match missing_ok=True
          containers:
            #@overlay/match by=overlay.all
            - env:
              - name: NO_PROXY
                value: ".cluster.local.,.cluster.local,.svc"
              - name: HTTPS_PROXY
                value: https://proxy.example.com
              - name: HTTP_PROXY
                value: https://proxy.example.com